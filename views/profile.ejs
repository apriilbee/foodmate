<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head') %>

  <body>
    <%- include('partials/navbar') %>

    <div class="container">
      <main>
        <h1 class="page-title">User Profile Settings</h1>

        <div class="profile-wrapper">
          <div class="profile-left">
            <form id="edit-profile-form" action="/profile/update" method="POST">
              <div class="profile-info">
                <label>User Name:</label>
                <input type="text" name="name" value="<%= user?.name || '' %>" required>

                <label>User Email:</label>
                <input type="email" name="email" value="<%= user?.email || '' %>" required>
              </div>

              <div class="change-password">
                <h3>Change Password</h3>
                <input type="password" name="currentPassword" placeholder="Current Password" required>
                <input type="password" name="newPassword" placeholder="New Password" required>
                <input type="password" name="confirmPassword" placeholder="Confirm Password" required>
              </div>

              <div class="actions">
                <button type="submit" class="save-btn">Save Changes</button>
              </div>
            </form>
          </div>

          <div class="profile-right">
            <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Profile Picture" class="avatar">
            <div class="profile-name"><%= user?.name || "User" %></div>
            <button class="edit-pic-btn">Edit Profile Picture</button>
          </div>
        </div>

        <!-- Preferences -->
        <section class="preferences">
          <h2>Dietary Preferences</h2>

          <form id="dietary-form" action="/profile/preferences" method="POST">
            <div class="checkbox-wrapper">
              <label class="styled-checkbox"><input type="checkbox" name="dietary" value="Vegan"> Vegan</label>
              <label class="styled-checkbox"><input type="checkbox" name="dietary" value="Gluten-Free"> Gluten-Free</label>
              <label class="styled-checkbox"><input type="checkbox" name="dietary" value="Keto"> Keto</label>
              <label class="styled-checkbox"><input type="checkbox" name="dietary" value="Vegetarian"> Vegetarian</label>
              <label class="styled-checkbox"><input type="checkbox" name="dietary" value="Pescatarian"> Pescatarian</label>
            </div>

            <div class="other-input">
              <label>Other Dietary Preference:</label>
              <input type="text" name="dietaryOther" placeholder="Enter other dietary preference">
            </div>

            <div class="checkbox-wrapper">
              <label class="styled-checkbox"><input type="checkbox" name="allergies" value="Soy"> Soy Allergy</label>
              <label class="styled-checkbox"><input type="checkbox" name="allergies" value="Nuts"> Nuts Allergy</label>
              <label class="styled-checkbox"><input type="checkbox" name="allergies" value="Dairy"> Dairy Allergy</label>
            </div>

            <div class="other-input">
              <label>Other Allergies:</label>
              <input type="text" name="allergyOther" placeholder="Enter other allergies">
            </div>

            <div class="actions">
              <button type="submit" class="save-btn">Save Preferences</button>
            </div>
          </form>
        </section>

        <section class="account-privacy">
          <h2>Account & Privacy</h2>
          <p><a href="/profile/download">Download My Data</a></p>
          <p><a href="/profile/delete" class="delete-link">Delete My Account</a></p>
        </section>

        <% if (message) { %>
          <div id="message"><%= message %></div>
        <% } %>

        <div class="actions">
          <a href="/" class="cancel-btn">Cancel</a>
        </div>
      </main>
    </div>

    <%- include('partials/scripts') %>
  </body>
</html>
