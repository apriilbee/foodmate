<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head') %>
  <style>

/* Profile wrapper and layout */
.profile-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-top: 20px;
    padding: 10px;
}
 
.profile-left {
    width: 65%;
}
 
.profile-right {
    width: 30%;
    text-align: right;
}
 
.avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
}
 
.edit-pic-btn {
    background-color: #f97316;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    margin-top: 10px;
    cursor: pointer;
}
 
/* Profile form inputs */
input[type="text"],
input[type="email"],
input[type="password"] {
    width: 90%;
    padding: 10px;
    margin: 8px 0;
    border: 1px solid #ccc;
    border-radius: 6px;
}
 
/* Dietary Preferences Section */
.checkbox-wrapper {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
    padding: 10px;
    color: #f97316;
}
 
/* Styling for checkboxes */
.checkbox-wrapper input[type="checkbox"] {
    width: 30px; /* Increase checkbox size */
    height: 30px; /* Increase checkbox size */
    background-color: #fff; /* White background */
    border: 3px solid #808080; /* Grey border */
    border-radius: 4px; /* Rounded borders */
    display: inline-block;
    vertical-align: middle;
    position: relative;
}
 
/* When checkbox is checked */
.checkbox-wrapper input[type="checkbox"]:checked {
    background-color: #808080; /* Grey background when checked */
    border-color: #333; /* Darker border */
}
 
/* Hover effect for checkboxes */
.checkbox-wrapper input[type="checkbox"]:hover {
    border-color: #f97316; /* Orange border color on hover */
}
 
/* Label for checkboxes */
.checkbox-wrapper label {
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    color: #333; /* Dark text color for labels */
}
 
/* Styling for "Other" input fields */
.other-input {
    margin-top: 10px;
}
 
/* Save and Cancel buttons */
.save-btn, .cancel-btn {
    background-color: #f97316;
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    margin-top: 20px;
}
 
.cancel-btn {
    background-color: #6b7280;
}
 
  </style>
  <body>
    <%- include('partials/navbar') %>
  
 
    <div class="container">
      <main>
        <h1>User Profile Settings</h1>
 
        <div class="profile-wrapper">
          
          <!-- Left: Profile Form -->
          <div class="profile-left">
            <form id="edit-profile-form" action="/profile" method="POST">
              
              <div class="profile-info">
                <label>User Name:</label>
                <input type="text" name="name" value="<%= user?.name || '' %>" required>
 
                <label>User Email:</label>
                <input type="email" name="email" value="<%= user?.email || '' %>" >
              </div>
 
              <div class="change-password">
                <h3>Change Password</h3>
                <input type="password" name="currentPassword" placeholder="Current Password" >
                <input type="password" name="newPassword" placeholder="New Password" >
                <input type="password" name="confirmPassword" placeholder="Confirm Password" >
              </div>
 
              <div class="actions">
                <button type="submit" class="save-btn">Save Changes</button>
              </div>
            </form>
          </div>
 
          <!-- Right: Profile Picture -->
          <div class="profile-right">
            <img src="/images/default-avatar.png" alt="Profile Picture" class="avatar">
            <button class="edit-pic-btn">Edit Profile Picture</button>
          </div>
 
        </div> 
        <!-- End of profile-wrapper -->
 
        <!-- Dietary Preferences Section -->
        <section class="preferences">
          <h2>Dietary Preferences</h2>
 
          <form id="dietary-form" action="/profile/dietpreferences" method="POST">
            <div class="checkbox-wrapper">
              <label><input type="checkbox" name="dietary" value="Vegan"> Vegan</label>
              <label><input type="checkbox" name="dietary" value="Gluten-Free"> Gluten-free</label>
              <label><input type="checkbox" name="dietary" value="Keto"> Keto</label>
              <label><input type="checkbox" name="dietary" value="Vegetarian"> Vegetarian</label>
              <label><input type="checkbox" name="dietary" value="Pescatarian"> Pescatarian</label>
            </div>
 
            <div class="other-input">
              <label>Others:</label>
              <input type="text" name="dietaryOther" placeholder="Enter other dietary preference">
            </div>
 
            <div class="checkbox-wrapper">
              <label><input type="checkbox" name="allergies" value="Soy"> Soy Allergy</label>
              <label><input type="checkbox" name="allergies" value="Nuts"> Nuts Allergy</label>
              <label><input type="checkbox" name="allergies" value="Dairy"> Dairy Allergy</label>
            </div>
 
            <div class="other-input">
              <label>Others:</label>
              <input type="text" name="allergyOther" placeholder="Enter other allergies">
            </div>
 
            <div class="actions">
              <button type="submit" class="save-btn">Save Preferences</button>
            </div>
          </form>
        </section>
 
        <!-- Account Privacy -->
        <section class="account-privacy">
          <h2>Account & Privacy</h2>
          <p><a href="/profile/download">Download My Data</a></p>
          <p><a href="/profile/delete" style="color:red;">Delete My Account</a></p>
        </section>
 
        <% if (message) { %>
          <div id="message"><%= message %></div>
        <% } %>
 
        <div class="actions">
          <a href="/" class="cancel-btn">Cancel</a>
        </div>
 
      </main>
    </div>
 
    <%- include('partials/scripts') %>
  </body>
</html>